name: Sync to Hugging Face hub
on:
  push:
    branches: [main]

  # to run this workflow manually from the Actions tab
  workflow_dispatch: 

jobs:
  sync-to-hub:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
          lfs: true
      # - uses: actions/setup-python@v4
        # with:
        #   python-version: '3.10' 
        #   cache: 'pip'
      - name: Push to hub
        
        run: |
          curl --location 'https://huggingface.co/api/repos/create' \
          --header 'Authorization: Bearer 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' \
          --header 'Content-Type: application/json' \
          --data '{
            "type": "model",
            "name": "github2",
            "organization": "shellplc",
            "private":true
          }'
      - name: Pushing
        env:
          HF_TOKEN: ${{ secrets.HF_TOKEN }}
        run: |
          git push --force https://${{vars.HF_USERNAME}}:$HF_TOKEN@huggingface.co/shellplc/github2 main 
        
      
